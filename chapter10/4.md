##<center>rest-framework版本控制</center>

### 一、[官网地址](http://www.django-rest-framework.org/api-guide/versioning/)

### 二、直接在`request`中获取到版本号
* 1、前面我们介绍`restfull`规范的时候就讲到一个版本的

* 2、`url`地址`http://127.0.0.1:8000/app01/api/v1/user/?token=1ea94bc978147f46c402c238e5adaf07&version=v1`

* 3、直接在视图中获取版本号

  ```py
  class UserView(APIView):
      permission_classes = []
      authentication_classes = []

      def get(self, request, *args, **kwargs):
          print(request.GET.get('version'))
          print(request._request.GET.get('version'))
          print(request.query_params.get('version'))
          return HttpResponse('用户信息')
  ```

### 三、单独定义一个类来实现

* 1、引入包

  ```py
  from rest_framework.versioning import BaseVersioning
  ```

* 2、定义类

  ```py
  from rest_framework.versioning import BaseVersioning

  class ParamVersion(BaseVersioning):
      def determine_version(self, request, *args, **kwargs):
          version = request.query_params.get('version')
          return version
  ```

* 3、在类中使用

  ```py
  class UserView(APIView):
      permission_classes = []
      authentication_classes = []
      # 使用刚刚定义的类
      versioning_class = ParamVersion

      def get(self, request, *args, **kwargs):
          print(request.version)
          return HttpResponse('用户信息')
  ```

### 四、直接使用内置版本

* 1、实现代码

  ```py
  from rest_framework.versioning import QueryParameterVersioning

  class UserView(APIView):
      permission_classes = []
      authentication_classes = []
      versioning_class = QueryParameterVersioning

      def get(self, request, *args, **kwargs):
          print(request.version)
          return HttpResponse('用户信息')
  ```

### 五、在配置文件中设置

* 1、`settings.py`中配置

  ```py
  REST_FRAMEWORK = {
      'DEFAULT_VERSION': 'v1',
      'ALLOWED_VERSIONS': ['v1', 'v2'],
      'VERSION_PARAM': 'version'
  }
  ```

* 2、